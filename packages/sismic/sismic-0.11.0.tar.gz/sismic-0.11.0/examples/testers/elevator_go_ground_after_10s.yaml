statechart:
  name: Test that the elevator goes to ground floor after 10 seconds (timeout set to 12 seconds)
  initial: active
  on entry: floor = 0
  states:
    - name: active
      transitions:
        - event: stopped
          target: success
      parallel states:
        - name: guess floor
          transitions:
            - event: entered
              guard: event.state == 'movingUp'
              target: guess floor
              action: floor += 1
            - event: entered
              guard: event.state == 'movingDown'
              action: floor -= 1
        - name: check timeout
          initial: standing
          states:
            - name: standing
              transitions:
                - event: entered
                  guard: event.state == 'moving'
                  target: moving
                - guard: after(12) and floor != 0
                  target: timeout
            - name: moving
              transitions:
                - event: exited
                  guard: event.state == 'moving'
                  target: standing
            - name: timeout
              transitions:
                - event: stopped
                  target: timeout  # Ensure final is not reached
    - name: success
      type: final