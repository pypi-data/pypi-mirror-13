

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>nvector._core.n_EA_E_and_n_EB_E2p_AB_E &mdash; nvector 0.4.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="nvector 0.4.1 documentation" href="../../index.html"/>
        <link rel="up" title="nvector package" href="../nvector.html"/>
        <link rel="next" title="nvector._core.n_EA_E_and_p_AB_E2n_EB_E" href="nvector._core.n_EA_E_and_p_AB_E2n_EB_E.html"/>
        <link rel="prev" title="nvector._core.p_EB_E2n_EB_E" href="nvector._core.p_EB_E2n_EB_E.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> nvector</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../src/overview.html">Introduction to Nvector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../src/overview.html#description">Description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../src/overview.html#documentation-and-code">Documentation and code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../src/overview.html#installation-and-upgrade">Installation and upgrade:</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../src/overview.html#unit-tests">Unit tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../src/overview.html#acknowledgement">Acknowledgement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../src/overview.html#getting-started">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../src/overview.html#see-also">See also</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../src/getting_started_functional.html">     Functional examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../changes.html#version-0-4-1-januar-19-2016">Version 0.4.1, Januar 19, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changes.html#version-0-1-3-januar-1-2016">Version 0.1.3, Januar 1, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changes.html#version-0-1-1-januar-1-2016">Version 0.1.1, Januar 1, 2016</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../modules.html">Module Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../nvector.html">nvector package</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">nvector</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../modules.html">Modules</a> &raquo;</li>
      
          <li><a href="../nvector.html">nvector package</a> &raquo;</li>
      
    <li>nvector._core.n_EA_E_and_n_EB_E2p_AB_E</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../_sources/api/generated/nvector._core.n_EA_E_and_n_EB_E2p_AB_E.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="nvector-core-n-ea-e-and-n-eb-e2p-ab-e">
<h1>nvector._core.n_EA_E_and_n_EB_E2p_AB_E<a class="headerlink" href="#nvector-core-n-ea-e-and-n-eb-e2p-ab-e" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="nvector._core.n_EA_E_and_n_EB_E2p_AB_E">
<code class="descclassname">nvector._core.</code><code class="descname">n_EA_E_and_n_EB_E2p_AB_E</code><span class="sig-paren">(</span><em>n_EA_E</em>, <em>n_EB_E</em>, <em>z_EA=0</em>, <em>z_EB=0</em>, <em>a=6378137</em>, <em>f=0.0033528106647474805</em>, <em>R_Ee=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nvector/_core.html#n_EA_E_and_n_EB_E2p_AB_E"><span class="viewcode-link">[source]</span></a><a class="reference external" href="http://github.com/pbrod/nvector/blob/v0.4.1/nvector/_core.py#L689-L697"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nvector._core.n_EA_E_and_n_EB_E2p_AB_E" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Return the delta vector from position A to B.</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>n_EA_E, n_EB_E:  3 x n array</strong></p>
<blockquote>
<div><blockquote>
<div><p>n-vector(s) [no unit] of position A and B, decomposed in E.</p>
</div></blockquote>
<dl class="docutils">
<dt>z_EA, z_EB:  1 x n array</dt>
<dd><p class="first last">Depth(s) [m] of system A and B, relative to the ellipsoid.
(z_EA = -height, z_EB = -height)</p>
</dd>
<dt>a: real scalar, default WGS-84 ellipsoid.</dt>
<dd><p class="first last">Semi-major axis of the Earth ellipsoid given in [m].</p>
</dd>
<dt>f: real scalar, default WGS-84 ellipsoid.</dt>
<dd><p class="first last">Flattening [no unit] of the Earth ellipsoid. If f==0 then spherical
Earth with radius a is used in stead of WGS-84.</p>
</dd>
<dt>R_Ee <span class="classifier-delimiter">:</span> <span class="classifier">2d array</span></dt>
<dd><p class="first last">rotation matrix defining the axes of the coordinate frame E.</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">p_AB_E:  3 x n array</p>
<blockquote class="last">
<div><p>Cartesian position vector(s) from A to B, decomposed in E.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The n-vectors for positions A (n_EA_E) and B (n_EB_E) are given. The
output is the delta vector from A to B (p_AB_E).
The calculation is excact, taking the ellipsity of the Earth into account.
It is also non-singular as both n-vector and p-vector are non-singular
(except for the center of the Earth).
The default ellipsoid model used is WGS-84, but other ellipsoids/spheres
might be specified.</p>
<p class="rubric">Examples</p>
<p><strong>Example 1: &#8220;A and B to delta&#8221;</strong></p>
<img alt="http://www.navlab.net/images/ex1img.png" src="http://www.navlab.net/images/ex1img.png" />
<p>Given two positions, A and B as latitudes, longitudes and depths relative to
Earth, E.</p>
<p>Find the exact vector between the two positions, given in meters north, east,
and down, and find the direction (azimuth) to B, relative to north.
Assume WGS-84 ellipsoid. The given depths are from the ellipsoid surface.
Use position A to define north, east, and down directions.
(Due to the curvature of Earth and different directions to the North Pole,
the north, east, and down directions will change (relative to Earth) for
different places.  A must be outside the poles for the north and east
directions to be defined.)</p>
<dl class="docutils">
<dt>Solution:</dt>
<dd><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nvector</span> <span class="kn">as</span> <span class="nn">nv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nvector</span> <span class="kn">import</span> <span class="n">rad</span><span class="p">,</span> <span class="n">deg</span>
</pre></div>
</div>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lat_EA</span><span class="p">,</span> <span class="n">lon_EA</span><span class="p">,</span> <span class="n">z_EA</span> <span class="o">=</span> <span class="n">rad</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">rad</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lat_EB</span><span class="p">,</span> <span class="n">lon_EB</span><span class="p">,</span> <span class="n">z_EB</span> <span class="o">=</span> <span class="n">rad</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">rad</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="mi">6</span>
</pre></div>
</div>
</dd>
<dt>Step1: Convert to n-vectors:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">n_EA_E</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">lat_lon2n_E</span><span class="p">(</span><span class="n">lat_EA</span><span class="p">,</span> <span class="n">lon_EA</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_EB_E</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">lat_lon2n_E</span><span class="p">(</span><span class="n">lat_EB</span><span class="p">,</span> <span class="n">lon_EB</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Step2: Find p_AB_E (delta decomposed in E).WGS-84 ellipsoid is default:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p_AB_E</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">n_EA_E_and_n_EB_E2p_AB_E</span><span class="p">(</span><span class="n">n_EA_E</span><span class="p">,</span> <span class="n">n_EB_E</span><span class="p">,</span> <span class="n">z_EA</span><span class="p">,</span> <span class="n">z_EB</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Step3: Find R_EN for position A:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">R_EN</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">n_E2R_EN</span><span class="p">(</span><span class="n">n_EA_E</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Step4: Find p_AB_N (delta decomposed in N).</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">p_AB_N</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">R_EN</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">p_AB_E</span><span class="p">)</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valtxt</span> <span class="o">=</span> <span class="s">&#39;{0:8.2f}, {1:8.2f}, {2:8.2f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">p_AB_N</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;Ex1: delta north, east, down = {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">valtxt</span><span class="p">)</span>
<span class="go">&#39;Ex1: delta north, east, down = 331730.23, 332997.87, 17404.27&#39;</span>
</pre></div>
</div>
</dd>
<dt>Step5: Also find the direction (azimuth) to B, relative to north:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">azimuth</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">p_AB_N</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p_AB_N</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;azimuth = {0:4.2f} deg&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">deg</span><span class="p">(</span><span class="n">azimuth</span><span class="p">))</span>
<span class="go">&#39;azimuth = 45.11 deg&#39;</span>
</pre></div>
</div>
</dd>
<dt>See also</dt>
<dd><a class="reference external" href="http://www.navlab.net/nvector/#example_1">Example 1 at www.navlab.net</a></dd>
</dl>
</dd></dl>

</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="nvector._core.n_EA_E_and_p_AB_E2n_EB_E.html" class="btn btn-neutral float-right" title="nvector._core.n_EA_E_and_p_AB_E2n_EB_E">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nvector._core.p_EB_E2n_EB_E.html" class="btn btn-neutral" title="nvector._core.p_EB_E2n_EB_E"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Norwegian Defence Research Establishment (FFI).
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.4.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>