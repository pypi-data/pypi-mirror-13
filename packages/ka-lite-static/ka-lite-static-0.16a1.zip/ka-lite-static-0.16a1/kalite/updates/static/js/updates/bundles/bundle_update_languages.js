require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"update_languages":[function(require,module,exports){
function version_comparison(e,t){for(var a,n,s=e.split("."),l=t.split("."),i=Math.min(s.length,l.length),u=0;i>u;u++){if(a=parseInt(s[u],10)||0,n=parseInt(l[u],10)||0,a>n)return 1;if(n>a)return-1}return 0}function get_available_languages(){return api.doRequest(window.sessionModel.get("AVAILABLE_LANGUAGEPACK_URL"),null,{cache:!1,dataType:"jsonp"}).success(function(e){installable_languages=e,display_languages()}).fail(function(e,t,a){installable_languages=[],display_languages()})}function get_installed_languages(){return api.doRequest(window.Urls.installed_language_packs(),null,{cache:!1,datatype:"json"}).success(function(e){installed_languages=e,display_languages()}).fail(function(e,t,a){installed_languages=[],display_languages()})}function display_languages(){function e(e){api.doRequest(window.Urls.delete_language_pack(),{lang:e}).success(function(e){get_installed_languages(),display_languages(a)})}function t(){var e=$("#language-packs-ul");e.find("li").remove(),a.forEach(function(t,a){var s=t.subtitle_count,l=t.percent_translated,i=t.code,u=t.beta,g=n.map(function(e){return e.code});if(-1===$.inArray(i,g)&&(l>0||s>0)){var r=$("<li></li>").attr("id",sprintf("option-%(code)s",t)).attr("role","presentation").attr("value",sprintf("%(code)s",t)).click({caller_value:sprintf("%(code)s",t)},select_lang_pack).append($("<a></a>").attr("role","menu-item").html(sprintf("%(name)s",t)));u&&$("#beta-checkbox").is(":checked")?(r.find("a").append($("<span></span>").text(gettext("beta")).attr("class","beta-text")),e.append(r)):u||e.append(r)}})}var a=installable_languages,n=installed_languages;$("table.installed-languages").empty(),n.forEach(function(e,t){if(e.name){var n;n=e.code!==window.sessionModel.get("DEFAULT_LANGUAGE")?sprintf("<span><a onclick='set_server_language(\"%(lang)s\")' class='set_server_language' value='%(lang)s' href='#'><button type='button' class='btn btn-default btn-sm'>%(link_text)s</button></a></span>",{lang:e.code,link_text:gettext("Set as default")}):gettext("Default"),e.subtitles=gettext("Subtitles"),e.translated=gettext("Translated");var s=sprintf("<b>%(name)s</b><br>%(subtitle_count)d %(subtitles)s <br> %(percent_translated)d%% %(translated)s",e),l=e.code,i=sprintf("<tr><td class='lang-name'>%s</td><td class='lang-link'>%s </td>",s,n);if(a.length>0){var u=a.filter(function(t){return e.code===t.code});if(0!==u.length){u=u[0];var g=version_comparison(u.software_version,e.software_version),r=1==g||0===g&&u.language_pack_version>e.language_pack_version;if(r){var o=u.percent_translated-e.percent_translated,c=u.subtitle_count-e.subtitle_count;i+=sprintf("<td class='upgrade-link'><a href='#' onclick='start_languagepack_download(\"%(lang.code)s\")'>%(upgrade_text)s</a> <br> +%(translated)d%% %(translated_text)s <br> +%(srt)d %(srt_text)s / %(size)s</td>",{lang:e,upgrade_text:gettext("<button type='button' class='btn btn-info'>Upgrade</button>"),translated:o,translated_text:gettext("Translated"),srt:c,srt_text:gettext("Subtitles"),size:sprintf("%5.2f MB",u.zip_size/1e6||0)})}else i+=sprintf("<td class='upgrade-link'>%(up_to_date_text)s</td>",{up_to_date_text:gettext("Up to Date")})}}i+="en"!=l?sprintf("<td class='delete-language-button'> <button class='btn btn-danger' value='%s' type='button'>%s</button></td>",l,gettext("Delete")):e.subtitle_count>0?sprintf("<td class='delete-language-button'> <button class='btn btn-danger' value='%s' type='button'>%s</button></td>",l,gettext("Delete Subtitles")):sprintf("<td class='delete-language-button'></td>"),i+="<td class='clear'></td></tr>",$("table.installed-languages").append(i)}}),$(function(){$(".delete-language-button").children("button").click(function(t){function a(t){$("<div></div>").appendTo("body").html("<div><h6>"+t+"?</h6></div>").dialog({modal:!0,title:gettext("Confirm Delete"),zIndex:1e4,autoOpen:!0,width:"auto",resizable:!1,buttons:{Yes:function(){e(n),$(this).remove()},No:function(){$(this).remove()}}})}var n=$(this).val();a(sprintf(gettext("Are you sure you want to delete language pack '%(lang_code)s'"),{lang_code:n})),$("button.ui-dialog-titlebar-close").hide()})}),t(),$("#beta-checkbox").click(function(){t()})}function start_languagepack_download(e){messages.clear_messages(),$("#get-language-button").prop("disabled",!0),downloading=!0,api.doRequest(Urls.start_languagepack_download(),{lang:e}).success(function(e,t,a){base.updatesStart("languagepackdownload",2e3,languagepack_callbacks)})}function select_lang_pack(e){var t=e.data.caller_value,a=!1,n=$(sprintf("#option-%s",t));$("#language-packs-selection").html(n.html()).append($("<span></span>").attr("class","caret")),$("#language-packs").attr("value",n.attr("value"));var s=installable_languages.filter(function(e){return t===e.code});if(a=0!==s.length,downloading||$("#get-language-button").prop("disabled",!a),a){var l=s[0];$("#lp-num-srts").text(sprintf("%d",l.subtitle_count||0)),$("#lp-pct-trans").text(sprintf("%5.2f%%",l.percent_translated||0)),$("#lp-down-size").text(sprintf("%5.2f MB",l.zip_size/1e6||0)),$("#lp-disk-size").text(sprintf("%5.2f MB",l.package_size/1e6||0)),$("#lp-num-exers").text(sprintf("%d",l.num_exercises||0))}$("#langpack-details").toggle(a)}function languagepack_reset_callback(e,t){get_installed_languages(),downloading=!1}function languagepack_complete_callback(e){messages.show_message("warning",sprintf(gettext("Server must be restarted to activate language pack %(lang)s."),{lang:e.process_name}))}function set_server_language(e){api.doRequest(Urls.set_default_language(),{lang:e}).success(function(){window.location.reload()})}function update_server_status(){connectivity.with_online_status("server",function(e){e?base.updatesStart("languagepackdownload",1e3,languagepack_callbacks):(messages.clear_messages(),messages.show_message("error",gettext("Could not connect to the central server; language packs cannot be downloaded at this time.")))})}var api=require("utils/api"),$=require("base/jQuery"),messages=require("utils/messages"),base=require("updates/base"),connectivity=require("utils/connectivity"),sprintf=require("sprintf-js").sprintf,installable_languages=[],installed_languages=[],downloading=!1,languagepack_callbacks={reset:languagepack_reset_callback,completed:languagepack_complete_callback};window.start_languagepack_download=start_languagepack_download;var language_downloading=null;$(function(){$("#get-language-button").click(function(e){language_downloading=$("#language-packs").attr("value"),start_languagepack_download(language_downloading)})}),window.set_server_language=set_server_language,$(function(){get_available_languages().success(update_server_status).fail(update_server_status),get_installed_languages().success(update_server_status).fail(update_server_status)});
},{"base/jQuery":45,"sprintf-js":615,"updates/base":124,"utils/api":110,"utils/connectivity":111,"utils/messages":114}]},{},["update_languages"])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9mYWN0b3ItYnVuZGxlL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJrYWxpdGUvdXBkYXRlcy9zdGF0aWMvanMvdXBkYXRlcy9idW5kbGVfbW9kdWxlcy91cGRhdGVfbGFuZ3VhZ2VzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZnVuY3Rpb24gdmVyc2lvbl9jb21wYXJpc29uKGUsdCl7Zm9yKHZhciBhLG4scz1lLnNwbGl0KFwiLlwiKSxsPXQuc3BsaXQoXCIuXCIpLGk9TWF0aC5taW4ocy5sZW5ndGgsbC5sZW5ndGgpLHU9MDtpPnU7dSsrKXtpZihhPXBhcnNlSW50KHNbdV0sMTApfHwwLG49cGFyc2VJbnQobFt1XSwxMCl8fDAsYT5uKXJldHVybiAxO2lmKG4+YSlyZXR1cm4tMX1yZXR1cm4gMH1mdW5jdGlvbiBnZXRfYXZhaWxhYmxlX2xhbmd1YWdlcygpe3JldHVybiBhcGkuZG9SZXF1ZXN0KHdpbmRvdy5zZXNzaW9uTW9kZWwuZ2V0KFwiQVZBSUxBQkxFX0xBTkdVQUdFUEFDS19VUkxcIiksbnVsbCx7Y2FjaGU6ITEsZGF0YVR5cGU6XCJqc29ucFwifSkuc3VjY2VzcyhmdW5jdGlvbihlKXtpbnN0YWxsYWJsZV9sYW5ndWFnZXM9ZSxkaXNwbGF5X2xhbmd1YWdlcygpfSkuZmFpbChmdW5jdGlvbihlLHQsYSl7aW5zdGFsbGFibGVfbGFuZ3VhZ2VzPVtdLGRpc3BsYXlfbGFuZ3VhZ2VzKCl9KX1mdW5jdGlvbiBnZXRfaW5zdGFsbGVkX2xhbmd1YWdlcygpe3JldHVybiBhcGkuZG9SZXF1ZXN0KHdpbmRvdy5VcmxzLmluc3RhbGxlZF9sYW5ndWFnZV9wYWNrcygpLG51bGwse2NhY2hlOiExLGRhdGF0eXBlOlwianNvblwifSkuc3VjY2VzcyhmdW5jdGlvbihlKXtpbnN0YWxsZWRfbGFuZ3VhZ2VzPWUsZGlzcGxheV9sYW5ndWFnZXMoKX0pLmZhaWwoZnVuY3Rpb24oZSx0LGEpe2luc3RhbGxlZF9sYW5ndWFnZXM9W10sZGlzcGxheV9sYW5ndWFnZXMoKX0pfWZ1bmN0aW9uIGRpc3BsYXlfbGFuZ3VhZ2VzKCl7ZnVuY3Rpb24gZShlKXthcGkuZG9SZXF1ZXN0KHdpbmRvdy5VcmxzLmRlbGV0ZV9sYW5ndWFnZV9wYWNrKCkse2xhbmc6ZX0pLnN1Y2Nlc3MoZnVuY3Rpb24oZSl7Z2V0X2luc3RhbGxlZF9sYW5ndWFnZXMoKSxkaXNwbGF5X2xhbmd1YWdlcyhhKX0pfWZ1bmN0aW9uIHQoKXt2YXIgZT0kKFwiI2xhbmd1YWdlLXBhY2tzLXVsXCIpO2UuZmluZChcImxpXCIpLnJlbW92ZSgpLGEuZm9yRWFjaChmdW5jdGlvbih0LGEpe3ZhciBzPXQuc3VidGl0bGVfY291bnQsbD10LnBlcmNlbnRfdHJhbnNsYXRlZCxpPXQuY29kZSx1PXQuYmV0YSxnPW4ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNvZGV9KTtpZigtMT09PSQuaW5BcnJheShpLGcpJiYobD4wfHxzPjApKXt2YXIgcj0kKFwiPGxpPjwvbGk+XCIpLmF0dHIoXCJpZFwiLHNwcmludGYoXCJvcHRpb24tJShjb2RlKXNcIix0KSkuYXR0cihcInJvbGVcIixcInByZXNlbnRhdGlvblwiKS5hdHRyKFwidmFsdWVcIixzcHJpbnRmKFwiJShjb2RlKXNcIix0KSkuY2xpY2soe2NhbGxlcl92YWx1ZTpzcHJpbnRmKFwiJShjb2RlKXNcIix0KX0sc2VsZWN0X2xhbmdfcGFjaykuYXBwZW5kKCQoXCI8YT48L2E+XCIpLmF0dHIoXCJyb2xlXCIsXCJtZW51LWl0ZW1cIikuaHRtbChzcHJpbnRmKFwiJShuYW1lKXNcIix0KSkpO3UmJiQoXCIjYmV0YS1jaGVja2JveFwiKS5pcyhcIjpjaGVja2VkXCIpPyhyLmZpbmQoXCJhXCIpLmFwcGVuZCgkKFwiPHNwYW4+PC9zcGFuPlwiKS50ZXh0KGdldHRleHQoXCJiZXRhXCIpKS5hdHRyKFwiY2xhc3NcIixcImJldGEtdGV4dFwiKSksZS5hcHBlbmQocikpOnV8fGUuYXBwZW5kKHIpfX0pfXZhciBhPWluc3RhbGxhYmxlX2xhbmd1YWdlcyxuPWluc3RhbGxlZF9sYW5ndWFnZXM7JChcInRhYmxlLmluc3RhbGxlZC1sYW5ndWFnZXNcIikuZW1wdHkoKSxuLmZvckVhY2goZnVuY3Rpb24oZSx0KXtpZihlLm5hbWUpe3ZhciBuO249ZS5jb2RlIT09d2luZG93LnNlc3Npb25Nb2RlbC5nZXQoXCJERUZBVUxUX0xBTkdVQUdFXCIpP3NwcmludGYoXCI8c3Bhbj48YSBvbmNsaWNrPSdzZXRfc2VydmVyX2xhbmd1YWdlKFxcXCIlKGxhbmcpc1xcXCIpJyBjbGFzcz0nc2V0X3NlcnZlcl9sYW5ndWFnZScgdmFsdWU9JyUobGFuZylzJyBocmVmPScjJz48YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2J0biBidG4tZGVmYXVsdCBidG4tc20nPiUobGlua190ZXh0KXM8L2J1dHRvbj48L2E+PC9zcGFuPlwiLHtsYW5nOmUuY29kZSxsaW5rX3RleHQ6Z2V0dGV4dChcIlNldCBhcyBkZWZhdWx0XCIpfSk6Z2V0dGV4dChcIkRlZmF1bHRcIiksZS5zdWJ0aXRsZXM9Z2V0dGV4dChcIlN1YnRpdGxlc1wiKSxlLnRyYW5zbGF0ZWQ9Z2V0dGV4dChcIlRyYW5zbGF0ZWRcIik7dmFyIHM9c3ByaW50ZihcIjxiPiUobmFtZSlzPC9iPjxicj4lKHN1YnRpdGxlX2NvdW50KWQgJShzdWJ0aXRsZXMpcyA8YnI+ICUocGVyY2VudF90cmFuc2xhdGVkKWQlJSAlKHRyYW5zbGF0ZWQpc1wiLGUpLGw9ZS5jb2RlLGk9c3ByaW50ZihcIjx0cj48dGQgY2xhc3M9J2xhbmctbmFtZSc+JXM8L3RkPjx0ZCBjbGFzcz0nbGFuZy1saW5rJz4lcyA8L3RkPlwiLHMsbik7aWYoYS5sZW5ndGg+MCl7dmFyIHU9YS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIGUuY29kZT09PXQuY29kZX0pO2lmKDAhPT11Lmxlbmd0aCl7dT11WzBdO3ZhciBnPXZlcnNpb25fY29tcGFyaXNvbih1LnNvZnR3YXJlX3ZlcnNpb24sZS5zb2Z0d2FyZV92ZXJzaW9uKSxyPTE9PWd8fDA9PT1nJiZ1Lmxhbmd1YWdlX3BhY2tfdmVyc2lvbj5lLmxhbmd1YWdlX3BhY2tfdmVyc2lvbjtpZihyKXt2YXIgbz11LnBlcmNlbnRfdHJhbnNsYXRlZC1lLnBlcmNlbnRfdHJhbnNsYXRlZCxjPXUuc3VidGl0bGVfY291bnQtZS5zdWJ0aXRsZV9jb3VudDtpKz1zcHJpbnRmKFwiPHRkIGNsYXNzPSd1cGdyYWRlLWxpbmsnPjxhIGhyZWY9JyMnIG9uY2xpY2s9J3N0YXJ0X2xhbmd1YWdlcGFja19kb3dubG9hZChcXFwiJShsYW5nLmNvZGUpc1xcXCIpJz4lKHVwZ3JhZGVfdGV4dClzPC9hPiA8YnI+ICslKHRyYW5zbGF0ZWQpZCUlICUodHJhbnNsYXRlZF90ZXh0KXMgPGJyPiArJShzcnQpZCAlKHNydF90ZXh0KXMgLyAlKHNpemUpczwvdGQ+XCIse2xhbmc6ZSx1cGdyYWRlX3RleHQ6Z2V0dGV4dChcIjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0nYnRuIGJ0bi1pbmZvJz5VcGdyYWRlPC9idXR0b24+XCIpLHRyYW5zbGF0ZWQ6byx0cmFuc2xhdGVkX3RleHQ6Z2V0dGV4dChcIlRyYW5zbGF0ZWRcIiksc3J0OmMsc3J0X3RleHQ6Z2V0dGV4dChcIlN1YnRpdGxlc1wiKSxzaXplOnNwcmludGYoXCIlNS4yZiBNQlwiLHUuemlwX3NpemUvMWU2fHwwKX0pfWVsc2UgaSs9c3ByaW50ZihcIjx0ZCBjbGFzcz0ndXBncmFkZS1saW5rJz4lKHVwX3RvX2RhdGVfdGV4dClzPC90ZD5cIix7dXBfdG9fZGF0ZV90ZXh0OmdldHRleHQoXCJVcCB0byBEYXRlXCIpfSl9fWkrPVwiZW5cIiE9bD9zcHJpbnRmKFwiPHRkIGNsYXNzPSdkZWxldGUtbGFuZ3VhZ2UtYnV0dG9uJz4gPGJ1dHRvbiBjbGFzcz0nYnRuIGJ0bi1kYW5nZXInIHZhbHVlPSclcycgdHlwZT0nYnV0dG9uJz4lczwvYnV0dG9uPjwvdGQ+XCIsbCxnZXR0ZXh0KFwiRGVsZXRlXCIpKTplLnN1YnRpdGxlX2NvdW50PjA/c3ByaW50ZihcIjx0ZCBjbGFzcz0nZGVsZXRlLWxhbmd1YWdlLWJ1dHRvbic+IDxidXR0b24gY2xhc3M9J2J0biBidG4tZGFuZ2VyJyB2YWx1ZT0nJXMnIHR5cGU9J2J1dHRvbic+JXM8L2J1dHRvbj48L3RkPlwiLGwsZ2V0dGV4dChcIkRlbGV0ZSBTdWJ0aXRsZXNcIikpOnNwcmludGYoXCI8dGQgY2xhc3M9J2RlbGV0ZS1sYW5ndWFnZS1idXR0b24nPjwvdGQ+XCIpLGkrPVwiPHRkIGNsYXNzPSdjbGVhcic+PC90ZD48L3RyPlwiLCQoXCJ0YWJsZS5pbnN0YWxsZWQtbGFuZ3VhZ2VzXCIpLmFwcGVuZChpKX19KSwkKGZ1bmN0aW9uKCl7JChcIi5kZWxldGUtbGFuZ3VhZ2UtYnV0dG9uXCIpLmNoaWxkcmVuKFwiYnV0dG9uXCIpLmNsaWNrKGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGEodCl7JChcIjxkaXY+PC9kaXY+XCIpLmFwcGVuZFRvKFwiYm9keVwiKS5odG1sKFwiPGRpdj48aDY+XCIrdCtcIj88L2g2PjwvZGl2PlwiKS5kaWFsb2coe21vZGFsOiEwLHRpdGxlOmdldHRleHQoXCJDb25maXJtIERlbGV0ZVwiKSx6SW5kZXg6MWU0LGF1dG9PcGVuOiEwLHdpZHRoOlwiYXV0b1wiLHJlc2l6YWJsZTohMSxidXR0b25zOntZZXM6ZnVuY3Rpb24oKXtlKG4pLCQodGhpcykucmVtb3ZlKCl9LE5vOmZ1bmN0aW9uKCl7JCh0aGlzKS5yZW1vdmUoKX19fSl9dmFyIG49JCh0aGlzKS52YWwoKTthKHNwcmludGYoZ2V0dGV4dChcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgbGFuZ3VhZ2UgcGFjayAnJShsYW5nX2NvZGUpcydcIikse2xhbmdfY29kZTpufSkpLCQoXCJidXR0b24udWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlXCIpLmhpZGUoKX0pfSksdCgpLCQoXCIjYmV0YS1jaGVja2JveFwiKS5jbGljayhmdW5jdGlvbigpe3QoKX0pfWZ1bmN0aW9uIHN0YXJ0X2xhbmd1YWdlcGFja19kb3dubG9hZChlKXttZXNzYWdlcy5jbGVhcl9tZXNzYWdlcygpLCQoXCIjZ2V0LWxhbmd1YWdlLWJ1dHRvblwiKS5wcm9wKFwiZGlzYWJsZWRcIiwhMCksZG93bmxvYWRpbmc9ITAsYXBpLmRvUmVxdWVzdChVcmxzLnN0YXJ0X2xhbmd1YWdlcGFja19kb3dubG9hZCgpLHtsYW5nOmV9KS5zdWNjZXNzKGZ1bmN0aW9uKGUsdCxhKXtiYXNlLnVwZGF0ZXNTdGFydChcImxhbmd1YWdlcGFja2Rvd25sb2FkXCIsMmUzLGxhbmd1YWdlcGFja19jYWxsYmFja3MpfSl9ZnVuY3Rpb24gc2VsZWN0X2xhbmdfcGFjayhlKXt2YXIgdD1lLmRhdGEuY2FsbGVyX3ZhbHVlLGE9ITEsbj0kKHNwcmludGYoXCIjb3B0aW9uLSVzXCIsdCkpOyQoXCIjbGFuZ3VhZ2UtcGFja3Mtc2VsZWN0aW9uXCIpLmh0bWwobi5odG1sKCkpLmFwcGVuZCgkKFwiPHNwYW4+PC9zcGFuPlwiKS5hdHRyKFwiY2xhc3NcIixcImNhcmV0XCIpKSwkKFwiI2xhbmd1YWdlLXBhY2tzXCIpLmF0dHIoXCJ2YWx1ZVwiLG4uYXR0cihcInZhbHVlXCIpKTt2YXIgcz1pbnN0YWxsYWJsZV9sYW5ndWFnZXMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiB0PT09ZS5jb2RlfSk7aWYoYT0wIT09cy5sZW5ndGgsZG93bmxvYWRpbmd8fCQoXCIjZ2V0LWxhbmd1YWdlLWJ1dHRvblwiKS5wcm9wKFwiZGlzYWJsZWRcIiwhYSksYSl7dmFyIGw9c1swXTskKFwiI2xwLW51bS1zcnRzXCIpLnRleHQoc3ByaW50ZihcIiVkXCIsbC5zdWJ0aXRsZV9jb3VudHx8MCkpLCQoXCIjbHAtcGN0LXRyYW5zXCIpLnRleHQoc3ByaW50ZihcIiU1LjJmJSVcIixsLnBlcmNlbnRfdHJhbnNsYXRlZHx8MCkpLCQoXCIjbHAtZG93bi1zaXplXCIpLnRleHQoc3ByaW50ZihcIiU1LjJmIE1CXCIsbC56aXBfc2l6ZS8xZTZ8fDApKSwkKFwiI2xwLWRpc2stc2l6ZVwiKS50ZXh0KHNwcmludGYoXCIlNS4yZiBNQlwiLGwucGFja2FnZV9zaXplLzFlNnx8MCkpLCQoXCIjbHAtbnVtLWV4ZXJzXCIpLnRleHQoc3ByaW50ZihcIiVkXCIsbC5udW1fZXhlcmNpc2VzfHwwKSl9JChcIiNsYW5ncGFjay1kZXRhaWxzXCIpLnRvZ2dsZShhKX1mdW5jdGlvbiBsYW5ndWFnZXBhY2tfcmVzZXRfY2FsbGJhY2soZSx0KXtnZXRfaW5zdGFsbGVkX2xhbmd1YWdlcygpLGRvd25sb2FkaW5nPSExfWZ1bmN0aW9uIGxhbmd1YWdlcGFja19jb21wbGV0ZV9jYWxsYmFjayhlKXttZXNzYWdlcy5zaG93X21lc3NhZ2UoXCJ3YXJuaW5nXCIsc3ByaW50ZihnZXR0ZXh0KFwiU2VydmVyIG11c3QgYmUgcmVzdGFydGVkIHRvIGFjdGl2YXRlIGxhbmd1YWdlIHBhY2sgJShsYW5nKXMuXCIpLHtsYW5nOmUucHJvY2Vzc19uYW1lfSkpfWZ1bmN0aW9uIHNldF9zZXJ2ZXJfbGFuZ3VhZ2UoZSl7YXBpLmRvUmVxdWVzdChVcmxzLnNldF9kZWZhdWx0X2xhbmd1YWdlKCkse2xhbmc6ZX0pLnN1Y2Nlc3MoZnVuY3Rpb24oKXt3aW5kb3cubG9jYXRpb24ucmVsb2FkKCl9KX1mdW5jdGlvbiB1cGRhdGVfc2VydmVyX3N0YXR1cygpe2Nvbm5lY3Rpdml0eS53aXRoX29ubGluZV9zdGF0dXMoXCJzZXJ2ZXJcIixmdW5jdGlvbihlKXtlP2Jhc2UudXBkYXRlc1N0YXJ0KFwibGFuZ3VhZ2VwYWNrZG93bmxvYWRcIiwxZTMsbGFuZ3VhZ2VwYWNrX2NhbGxiYWNrcyk6KG1lc3NhZ2VzLmNsZWFyX21lc3NhZ2VzKCksbWVzc2FnZXMuc2hvd19tZXNzYWdlKFwiZXJyb3JcIixnZXR0ZXh0KFwiQ291bGQgbm90IGNvbm5lY3QgdG8gdGhlIGNlbnRyYWwgc2VydmVyOyBsYW5ndWFnZSBwYWNrcyBjYW5ub3QgYmUgZG93bmxvYWRlZCBhdCB0aGlzIHRpbWUuXCIpKSl9KX12YXIgYXBpPXJlcXVpcmUoXCJ1dGlscy9hcGlcIiksJD1yZXF1aXJlKFwiYmFzZS9qUXVlcnlcIiksbWVzc2FnZXM9cmVxdWlyZShcInV0aWxzL21lc3NhZ2VzXCIpLGJhc2U9cmVxdWlyZShcInVwZGF0ZXMvYmFzZVwiKSxjb25uZWN0aXZpdHk9cmVxdWlyZShcInV0aWxzL2Nvbm5lY3Rpdml0eVwiKSxzcHJpbnRmPXJlcXVpcmUoXCJzcHJpbnRmLWpzXCIpLnNwcmludGYsaW5zdGFsbGFibGVfbGFuZ3VhZ2VzPVtdLGluc3RhbGxlZF9sYW5ndWFnZXM9W10sZG93bmxvYWRpbmc9ITEsbGFuZ3VhZ2VwYWNrX2NhbGxiYWNrcz17cmVzZXQ6bGFuZ3VhZ2VwYWNrX3Jlc2V0X2NhbGxiYWNrLGNvbXBsZXRlZDpsYW5ndWFnZXBhY2tfY29tcGxldGVfY2FsbGJhY2t9O3dpbmRvdy5zdGFydF9sYW5ndWFnZXBhY2tfZG93bmxvYWQ9c3RhcnRfbGFuZ3VhZ2VwYWNrX2Rvd25sb2FkO3ZhciBsYW5ndWFnZV9kb3dubG9hZGluZz1udWxsOyQoZnVuY3Rpb24oKXskKFwiI2dldC1sYW5ndWFnZS1idXR0b25cIikuY2xpY2soZnVuY3Rpb24oZSl7bGFuZ3VhZ2VfZG93bmxvYWRpbmc9JChcIiNsYW5ndWFnZS1wYWNrc1wiKS5hdHRyKFwidmFsdWVcIiksc3RhcnRfbGFuZ3VhZ2VwYWNrX2Rvd25sb2FkKGxhbmd1YWdlX2Rvd25sb2FkaW5nKX0pfSksd2luZG93LnNldF9zZXJ2ZXJfbGFuZ3VhZ2U9c2V0X3NlcnZlcl9sYW5ndWFnZSwkKGZ1bmN0aW9uKCl7Z2V0X2F2YWlsYWJsZV9sYW5ndWFnZXMoKS5zdWNjZXNzKHVwZGF0ZV9zZXJ2ZXJfc3RhdHVzKS5mYWlsKHVwZGF0ZV9zZXJ2ZXJfc3RhdHVzKSxnZXRfaW5zdGFsbGVkX2xhbmd1YWdlcygpLnN1Y2Nlc3ModXBkYXRlX3NlcnZlcl9zdGF0dXMpLmZhaWwodXBkYXRlX3NlcnZlcl9zdGF0dXMpfSk7Il19
